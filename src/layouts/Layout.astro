---
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

interface Props {
  title: string;
  description?: string;
}

const { title, description = 'RÎ¬stion Hub - your optimization lab, shared with the world.' } = Astro.props;
---

<!doctype html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <title>{title}</title>
    <link rel="icon" type="image/png" sizes="128x128" href={`${import.meta.env.BASE_URL}favicon.png`} />
    <link rel="preconnect" href="https://api.fontshare.com" />
    <link href="https://api.fontshare.com/v2/css?f[]=clash-display@700,600,500&f[]=satoshi@400,500,700&display=swap" rel="stylesheet" />

    <script is:inline>
      (() => {
        const stored = localStorage.getItem('theme');
        const theme = stored === 'light' || stored === 'dark' ? stored : 'dark';
        document.documentElement.dataset.theme = theme;
      })();
    </script>

    <style is:global>
      :root {
        --bg-deep: #0d0a1a;
        --bg-card: #171228;
        --text-primary: #ffffff;
        --text-secondary: #b3abc9;
        --coral-bright: #ffcf5c;
        --cyan-bright: #a781ff;
        --accent: #7b4ff2;
        --border-color: rgba(255, 255, 255, 0.08);
        --shadow-glow: 0 16px 40px rgba(0, 0, 0, 0.45);
        --nav-pill-bg: rgba(255, 255, 255, 0.06);
        --code-bg: rgba(10, 10, 15, 0.88);
        --code-text: #eff5ff;
        --code-border: rgba(135, 156, 214, 0.22);
      }

      :root[data-theme='light'] {
        --bg-deep: #faf8ff;
        --bg-card: #ffffff;
        --text-primary: #1d1730;
        --text-secondary: #5a4f78;
        --border-color: rgba(42, 24, 92, 0.14);
        --shadow-glow: 0 20px 45px rgba(36, 19, 79, 0.12);
        --nav-pill-bg: rgba(123, 79, 242, 0.1);
        --code-bg: #efe9ff;
        --code-text: #241a3d;
        --code-border: rgba(56, 36, 104, 0.2);
      }

      * {
        box-sizing: border-box;
      }

      html,
      body {
        margin: 0;
        min-height: 100%;
      }

      body {
        font-family: 'Satoshi', sans-serif;
        background: var(--bg-deep);
        color: var(--text-primary);
        line-height: 1.6;
      }

      h1,
      h2,
      h3 {
        font-family: 'Clash Display', sans-serif;
        letter-spacing: 0.01em;
      }

      a {
        color: inherit;
        text-decoration: none;
      }

      .page-shell {
        position: relative;
        isolation: isolate;
      }

      .ambient-bg,
      .starfield {
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: -2;
      }

      .ambient-bg {
        background:
          radial-gradient(900px circle at 12% 15%, rgba(167, 129, 255, 0.18), transparent 45%),
          radial-gradient(700px circle at 88% 20%, rgba(255, 207, 92, 0.16), transparent 45%),
          radial-gradient(500px circle at 50% 90%, rgba(123, 79, 242, 0.2), transparent 50%);
      }

      .starfield::before,
      .starfield::after {
        content: '';
        position: absolute;
        inset: -40%;
        background-image:
          radial-gradient(2px 2px at 20px 30px, rgba(255, 255, 255, 0.6), transparent 50%),
          radial-gradient(1px 1px at 70px 120px, rgba(255, 255, 255, 0.5), transparent 50%),
          radial-gradient(1.5px 1.5px at 140px 60px, rgba(167, 129, 255, 0.58), transparent 50%),
          radial-gradient(1px 1px at 200px 170px, rgba(255, 207, 92, 0.5), transparent 50%);
        background-size: 240px 220px;
        animation: drift 110s linear infinite;
        opacity: 0.45;
      }

      .starfield::after {
        animation-duration: 170s;
        animation-direction: reverse;
        opacity: 0.25;
        filter: blur(0.4px);
      }

      main {
        width: min(1120px, calc(100% - 2.5rem));
        margin: 0 auto;
        padding: 2.5rem 0 3.5rem;
      }

      .site-header {
        width: min(1120px, calc(100% - 2.5rem));
        margin: 0 auto;
        padding: 1.4rem 0 0.4rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 1rem;
      }

      .site-header nav {
        flex: 1;
      }

      nav ul {
        display: flex;
        align-items: center;
        justify-content: center;
        flex-wrap: wrap;
        gap: 1rem;
        list-style: none;
        margin: 0;
        padding: 0;
      }

      nav a {
        padding: 0.45rem 0.8rem;
        border-radius: 999px;
        color: var(--text-secondary);
        font-size: 0.95rem;
        transition: color 0.2s ease, background-color 0.2s ease;
      }

      nav a:hover,
      nav a.active {
        color: var(--text-primary);
        background: var(--nav-pill-bg);
      }

      .header-actions {
        display: inline-flex;
        align-items: center;
        gap: 0.6rem;
        flex-shrink: 0;
      }

      .theme-toggle {
        border: 1px solid var(--border-color);
        background: var(--bg-card);
        color: var(--text-primary);
        width: 2.45rem;
        height: 2.45rem;
        border-radius: 999px;
        display: grid;
        place-items: center;
        cursor: pointer;
        box-shadow: var(--shadow-glow);
      }

      .theme-toggle .icon {
        display: none;
      }

      :root[data-theme='dark'] .theme-toggle .icon-moon {
        display: inline-flex;
      }

      :root[data-theme='light'] .theme-toggle .icon-sun {
        display: inline-flex;
      }

      .site-footer {
        width: min(1120px, calc(100% - 2.5rem));
        margin: 0 auto;
        padding: 0.7rem 0 2.4rem;
        border-top: 1px solid var(--border-color);
        display: flex;
        justify-content: flex-start;
        align-items: center;
        gap: 1rem;
        color: var(--text-secondary);
        font-size: 0.95rem;
      }

      .feature-card {
        background: linear-gradient(145deg, rgba(255, 255, 255, 0.02), transparent 45%), var(--bg-card);
        border: 1px solid var(--border-color);
        border-radius: 18px;
        padding: 1.3rem;
        box-shadow: var(--shadow-glow);
      }

      .feature-icon {
        width: 2.35rem;
        height: 2.35rem;
        border-radius: 12px;
        display: grid;
        place-items: center;
        color: var(--cyan-bright);
        background: rgba(167, 129, 255, 0.18);
        margin-bottom: 0.8rem;
      }

      .feature-card h3 {
        margin: 0 0 0.55rem;
        font-size: 1.2rem;
      }

      .feature-card p {
        margin: 0;
        color: var(--text-secondary);
      }

      @keyframes drift {
        from {
          transform: translate3d(0, 0, 0) rotate(0deg);
        }
        to {
          transform: translate3d(-12%, -6%, 0) rotate(360deg);
        }
      }

      @media (max-width: 860px) {
        .site-header {
          width: min(1120px, calc(100% - 1.5rem));
          flex-direction: column;
          align-items: center;
          gap: 0.7rem;
        }

        .site-header nav {
          flex: none;
        }

        main {
          width: min(1120px, calc(100% - 1.5rem));
          padding-top: 1.7rem;
        }

        .site-footer {
          width: min(1120px, calc(100% - 1.5rem));
          flex-direction: column;
          align-items: flex-start;
          padding-bottom: 1.7rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="page-shell">
      <div class="ambient-bg" aria-hidden="true"></div>
      <div class="starfield" aria-hidden="true"></div>
      <Header />
      <main>
        <slot />
      </main>
      <Footer />
    </div>
  </body>
</html>
